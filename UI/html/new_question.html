<!DOCTYPE html>
<html>
    <head>
        <title>QUESTION</title>
        <link rel="icon" type="image/ico" href="../images/stack-logo.png" />
        <link href="../css/style2.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Exo:600" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Istok+Web:400,700i" rel="stylesheet">

    </head>
    <body onload="newQuestion()">
        <div class="flex-container">
            <div><a href="../../index.html" ><img src="../images/stack-logo.png" alt="Stack Overflow Lite Logo" class="logo"></a></div>
            <div><h1 class="hed1">Stack Overflow Lite</h1></div>
            <div><input type="text" placeholder="Search ..."></div>
            <div><a href="profile.html"><button type="button" class="reg" >PROFILE</button></a></div>
            <div><a href="login.html"><button type="button" class="log">LOG OUT</button></a></div>
        </div>
        <div class="flex-container5">
            <div id="question" class="r1">
            </div>
            <div class="r2">
                <div class="r31">
                    <h2>Best Answer: </h2>
                    <a href="#"><button class="log1 lg1">Upvote</button></a>
                    <a href="#"><button class="log1 lg2">Downvote</button></a>
                </div>
            </div>
            <div class="r3">
                <div class="r31">
                    <h1>Answers: </h1>
                    <a href="comment-form.html"><button class="log1">Add Comment</button></a>
                    <a href="answer-form.html"><button class="log1">Add Answer</button></a>
                </div>
                <div>
                </div>
            </div>

        </div>
    </body>
    <script>
        document.getElementById('question').addEventListener('onload', newQuestion)

        function newQuestion() {

            let question = localStorage.getItem('question');
            let description = localStorage.getItem('description');
            let qid = localStorage.getItem('qid');
            let token = localStorage.getItem('token');

            if (token = null) {
                redirect: window.location.replace('login.html')
            } else {
                fetch(`https://stackoverflow-lite-collo.herokuapp.com/questions/${qid}`, 
                {
                    mode: 'cors',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-type': 'application/json',
                        'x-access-token': `${localStorage.getItem("token")}`
                    }
                })
                .then((res) => res.json())
                .then((data) => {
                    if (data['status'] == 0 ) {
                        console.log(data);
                        let question = data['records'][0]
                            let output2 = `
                                    <h3>Title: ${question.question_title}</h3>
                                    <p>Description: ${question.description}</p>
                                    <br>Time: ${question.post_time}
                                    <br>Posted By: ${question.username}
                            `;

                        document.getElementById('question').innerHTML = output2;
                    }
                });
            }
        }
    </script>
    <footer>
            <div class="footer-container">
                    <div>
                            <a href="../../index.html"><h1>COMMUNITY</h1></a>
                        </div>
                        <div>
                            <a href="profile.html"><h1>PROFILE</h1></a>
                        </div>
                        <div>
                                <a href="../../index.html"><h1>FAQs</h1></a>
                            </div>
                        <div>
                            <a href="#"><h1>ABOUT US</h1></a>
                        </div>
                        <div>
                            <a href="#"><h1>CONTACT US</h1></a>
                        </div>
            </div>
       </footer>
</html>