<!DOCTYPE html>
<html>
    <head>
        <title>LOGIN</title>
        <link href="../css/style1.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Exo:600" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Istok+Web:400,700i" rel="stylesheet">

    </head>
    <body>
            <div class="container">
                <div class="flex-container">
                    <div><a href="../../index.html" ><img src="../images/stack-logo.png" alt="Stack Overflow Lite Logo" class="logo"></a></div>
                    <div><h1 class="hed1">Stack Overflow Lite</h1></div>
                    <div><input type="text" placeholder="Search ..."></div>
                    <div><h2>NOT YET SIGNED UP ?</h2></div>
                    <div><a href="signup.html"><button type="button" class="log">SIGN UP</button></a></div>
                </div>
                <div class="flex-container3">
                        <div class="suform">
                            <div><h1>LOGIN PAGE</h1></div>
                                <div>
                                    <form id="login_form">
                                        <div>Username: <input type="text" id="username" name="Username" required ></div><br>
                                        <div>Password: <input type="password" id="password" name="passw"  required></div><br>
                                        <div><a href="profile.html"><input type="submit" value='LOGIN' formaction="#top" ></a></div>
                                    </form>
                                </div>
                            </div>
                </div>
            </div>
            <script>
                document.getElementById('login_form').addEventListener('submit', login);
     
                function login(e) {
                    e.preventDefault();
     
                    let username = document.getElementById('username').value;
                    let password = document.getElementById('password').value;
     
<<<<<<< HEAD
                    fetch('https://stackoverflow-lite-collo.herokuapp.com/auth/login', {
=======
                    fetch('http://127.0.0.1:5000/auth/login', {
>>>>>>> 820f4501a78258999d7daf44736dbeb34722aa3a
                        method: 'POST',
                        headers: {
                            'Accept': 'application/json, text/plain, */*',
                            'Content-type': 'application/json'
                        },
                        body: JSON.stringify({username:username, password:password})
                    })
                    .then((res) => res.json())
                    .then((data) => {
                        console.log(data);
                        console.log(data['token'])
                        if (data['status'] == 0 ) {
                            alert(Object.values(data['message']));
                            localStorage.setItem("token", data['token'])
                            localStorage.setItem("firstname", data['records']['firstname'])
                            localStorage.setItem("surname", data['records']['surname'])
                            localStorage.setItem("email", data['records']['email'])
                            localStorage.setItem("username", username)
                            redirect: window.location.replace("profile.html");
                        }
                        else {
                            alert(Object.values(data['message']));
                        }
                });
                }
            </script> 
    </body>
    <footer>
            <div class="footer-container">
                    <div>
                            <a href="../../index.html"><h1>COMMUNITY</h1></a>
                        </div>
                        <div>
                            <a href="profile.html"><h1>PROFILE</h1></a>
                        </div>
                        <div>
                                <a href="../../index.html"><h1>FAQs</h1></a>
                            </div>
                        <div>
                            <a href="#"><h1>ABOUT US</h1></a>
                        </div>
                        <div>
                            <a href="#"><h1>CONTACT US</h1></a>
                        </div>
            </div>
        </footer>
</html>