<!DOCTYPE html>
<html>
    <head>
        <title>NEW QUESTION</title>
        <link href="../css/style2.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Exo:600" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Istok+Web:400,700i" rel="stylesheet">

    </head>
    <body>

            <div class="container">
                    <div class="flex-container">
                        <div><a href="../../index.html" ><img src="../images/stack-logo.png" alt="Stack Overflow Lite Logo" class="logo"></a></div>
                        <div><h1 class="hed1">Stack Overflow Lite</h1></div>
                        <div><input type="text" placeholder="Search ..."></div>
                        <div><a href="profile.html"><button type="button" class="reg" >PROFILE</button></a></div>
                        <div><a href="#"><button type="button" class="log">LOG OUT</button></a></div>
                    </div>
                    <div class="flex-container3">
                        <div class="suform">
                            <div><h1>Question Form</h1></div>
                            <div>
                            <form id="question_form">
<<<<<<< HEAD
                                <!-- <div>Select Stack: <select required>
=======
                                <div>Select Stack: <select required>
>>>>>>> 46f66ab91c2b958788ff643561df2e52096ab80b
                                    <option name="Java">Java</option>
                                    <option name="Python">Python</option>
                                    <option name="HTML/CSS/JS">HTML</option>
                                    <option name="RUBY">Ruby</option>
                                    <option name="C++">C++</option>
<<<<<<< HEAD
                                </select></div><br> -->
                                <div>Question Title: <input type="text" id="question_title" name="question_title" required></div><br>
=======
                                </select></div><br>
                                <div>Question Title: <input type="text" id="question_title" name="question" required></div><br>
>>>>>>> 46f66ab91c2b958788ff643561df2e52096ab80b
                                <div>Description:<br>  <textarea id="description" rows="15" cols="30" required></textarea></div><br>
                                <div class="sub"><input type="submit" value="Submit"></div>
                            </form>
                        </div>
                        </div>
                    </div>
            </div>
    </body>
    <script>
        document.getElementById('question_form').addEventListener('submit', addQuestion);

        function addQuestion(e) {
            e.preventDefault();
<<<<<<< HEAD
            let description = document.getElementById('description').value;
            let question_title = document.getElementsByName('question_title').
=======

            let question = document.getElementById('question_title').value;
            let description = document.getElementById('description').value;
>>>>>>> 46f66ab91c2b958788ff643561df2e52096ab80b
            let token = localStorage.getItem("token")
            if (token = null) {
                redirect: window.location.replace("login.html");
            } else {            
                fetch('https://stackoverflow-lite-collo.herokuapp.com/questions', {
                    method: 'POST',
                    mode: 'cors',
                    headers: {
                        'Accept': 'application/json, text/plain, */*',
                        'Content-type': 'application/json',
                        'x-access-token': `${localStorage.getItem("token")}`
                    },
<<<<<<< HEAD
                    body: JSON.stringify({ question_title:question_title, description:description})

=======
                    body: JSON.stringify({ question_title:question, description:description})
>>>>>>> 46f66ab91c2b958788ff643561df2e52096ab80b
                })
                .then((res) => res.json())
                .then((data) => {
                    console.log(data);
                    if (data['status'] == 0 ) {
                        alert(Object.values(data['message']));
                        redirect: window.location.replace("profile.html");
                    }
                    else {
                        alert(Object.values(data['message']));
                    }
            });
            }
        }
    </script> 
    <footer>
        <div class="footer-container">
                <div>
                        <a href="../../index.html"><h1>COMMUNITY</h1></a>
                    </div>
                    <div>
                        <a href="profile.html"><h1>PROFILE</h1></a>
                    </div>
                    <div>
                            <a href="../../index.html"><h1>FAQs</h1></a>
                        </div>
                    <div>
                        <a href="#"><h1>ABOUT US</h1></a>
                    </div>
                    <div>
                        <a href="#"><h1>CONTACT US</h1></a>
                    </div>
        </div>
   </footer>
</html>